{"version":3,"file":"static/js/429.675e45f7.chunk.js","mappings":"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","sources":["pages/login/style.js","pages/login/index.jsx","../node_modules/antd-mobile-icons/es/InformationCircleOutline.js","../node_modules/antd-mobile-icons/es/LeftOutline.js"],"sourcesContent":["import styled from 'styled-components'\r\nexport const LoginWrapper = styled.div`\r\n  .login {\r\n    box-sizing: border-box;\r\n    display: flex;\r\n    padding: 20px;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    .top {\r\n      box-sizing: border-box;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      font-size: 20px;\r\n      padding-bottom: 30px;\r\n    }\r\n    .loginImg {\r\n      margin: 100px auto 40px auto;\r\n    }\r\n    .main {\r\n      margin: 0 auto;\r\n    }\r\n    .end {\r\n      font-size: 18px;\r\n      margin: 0 60px 0 auto;\r\n    }\r\n  }\r\n  .adm-form-footer {\r\n    padding-bottom: 4px;\r\n  }\r\n`\r\n","import React, { useState } from 'react'\r\nimport { Form, Button, Input, Image, Toast } from 'antd-mobile'\r\nimport { LeftOutline, InformationCircleOutline } from 'antd-mobile-icons'\r\nimport { setToken } from '../../utils/storage'\r\nimport http from '../../utils/http'\r\nimport Img from '../../assets/images/login.jpg'\r\nimport { useDispatch } from 'react-redux'\r\nimport { fetchuserdata } from '../../redux/modules/user'\r\nimport { BASEURL } from '../../utils/baseurl'\r\nimport { LoginWrapper } from '../login/style'\r\n\r\nfunction Login({ navigate }) {\r\n  const dispatch = useDispatch()\r\n  const [isLogin, setIsLogin] = useState(true)\r\n\r\n  const onFinish = async ({ name, password }) => {\r\n    const endpoint = isLogin ? 'login' : 'user'\r\n    const res = await http.post(`${BASEURL}${endpoint}`, {\r\n      name,\r\n      password,\r\n    })\r\n    if (res.data.code !== 0) {\r\n      Toast.show(res.data.message)\r\n    } else {\r\n      if (endpoint === 'login') {\r\n        setToken(res.data.data.token)\r\n        dispatch(fetchuserdata())\r\n        navigate(-2)\r\n      } else {\r\n        setIsLogin(true)\r\n        Toast.show('注册成功，请登陆~')\r\n      }\r\n    }\r\n  }\r\n\r\n  const toggleForm = () => {\r\n    setIsLogin((prev) => !prev)\r\n  }\r\n\r\n  return (\r\n    <LoginWrapper>\r\n      <div className=\"login\">\r\n        <div className=\"top\">\r\n          <LeftOutline onClick={() => navigate(-1)} />\r\n          <InformationCircleOutline />\r\n        </div>\r\n        <Image src={Img} width={100} height={100} className=\"loginImg\" />\r\n        <Form\r\n          className=\"main\"\r\n          footer={\r\n            <Button block type=\"submit\" color=\"primary\" size=\"large\">\r\n              {isLogin ? '登录' : '注册'}\r\n            </Button>\r\n          }\r\n          onFinish={onFinish}\r\n        >\r\n          <Form.Item\r\n            name=\"name\"\r\n            rules={[{ required: true, message: '用户名不能为空' }]}\r\n          >\r\n            <Input placeholder=\"请输入用户名\" autoComplete=\"off\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"password\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: '请输入密码!',\r\n              },\r\n              { pattern: /^\\d{6}$/, message: '密码格式不正确！' },\r\n            ]}\r\n          >\r\n            <Input\r\n              placeholder=\"请输入密码\"\r\n              autoComplete=\"off\"\r\n              type=\"password\"\r\n            />\r\n          </Form.Item>\r\n        </Form>\r\n\r\n        <div className=\"end\">\r\n          {isLogin ? (\r\n            <p>\r\n              没有账户？\r\n              <span\r\n                onClick={toggleForm}\r\n                style={{ textDecoration: 'underline' }}\r\n              >\r\n                注册\r\n              </span>\r\n            </p>\r\n          ) : (\r\n            <p>\r\n              已有账户？\r\n              <span\r\n                onClick={toggleForm}\r\n                style={{ textDecoration: 'underline' }}\r\n              >\r\n                登录\r\n              </span>\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </LoginWrapper>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import * as React from \"react\";\n\nfunction InformationCircleOutline(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 49 48\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\"\n  }, props, {\n    style: Object.assign({\n      verticalAlign: '-0.125em'\n    }, props.style),\n    className: ['antd-mobile-icon', props.className].filter(Boolean).join(' ')\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"InformationCircleOutline-InformationCircleOutline\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(1.000000, 0.000000)\",\n    id: \"InformationCircleOutline-\\u7F16\\u7EC4\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"InformationCircleOutline-\\u77E9\\u5F62\",\n    fill: \"#FFFFFF\",\n    opacity: 0,\n    x: 0,\n    y: 0,\n    width: 48,\n    height: 48\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M24,5 C13.5065898,5 5,13.5065898 5,24 C5,34.4934102 13.5065898,43 24,43 C34.4934102,43 43,34.4934102 43,24 C43,13.5065898 34.4934102,5 24,5 Z M25.6,20 C25.8209139,20 26,20.1790861 26,20.4 L26,34.6 C26,34.8209139 25.8209139,35 25.6,35 L23.4,35 C23.1790861,35 23,34.8209139 23,34.6 L23,23 L21.4,23 C21.1790861,23 21,22.8209139 21,22.6 L21,20.4 C21,20.1790861 21.1790861,20 21.4,20 L25.6,20 Z M25.6,14 C25.8209139,14 26,14.1790861 26,14.4 L26,16.6 C26,16.8209139 25.8209139,17 25.6,17 L23.4,17 C23.1790861,17 23,16.8209139 23,16.6 L23,14.4 C23,14.1790861 23.1790861,14 23.4,14 L25.6,14 Z\",\n    id: \"InformationCircleOutline-\\u5F62\\u72B6\\u7ED3\\u5408\",\n    fill: \"currentColor\",\n    fillRule: \"nonzero\"\n  }))));\n}\n\nexport default InformationCircleOutline;","import * as React from \"react\";\n\nfunction LeftOutline(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 48 48\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\"\n  }, props, {\n    style: Object.assign({\n      verticalAlign: '-0.125em'\n    }, props.style),\n    className: ['antd-mobile-icon', props.className].filter(Boolean).join(' ')\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"LeftOutline-LeftOutline\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"LeftOutline-\\u7F16\\u7EC4\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"LeftOutline-\\u77E9\\u5F62\",\n    fill: \"#FFFFFF\",\n    opacity: 0,\n    x: 0,\n    y: 0,\n    width: 48,\n    height: 48\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M31.7053818,5.11219264 L13.5234393,22.6612572 L13.5234393,22.6612572 C12.969699,23.2125856 12.9371261,24.0863155 13.4257204,24.6755735 L13.5234393,24.7825775 L31.7045714,42.8834676 C31.7795345,42.9580998 31.8810078,43 31.9867879,43 L35.1135102,43 C35.3344241,43 35.5135102,42.8209139 35.5135102,42.6 C35.5135102,42.4936115 35.4711279,42.391606 35.3957362,42.316542 L16.7799842,23.7816937 L16.7799842,23.7816937 L35.3764658,5.6866816 C35.5347957,5.53262122 35.5382568,5.27937888 35.3841964,5.121049 C35.3088921,5.04365775 35.205497,5 35.0975148,5 L31.9831711,5 C31.8795372,5 31.7799483,5.04022164 31.7053818,5.11219264 Z\",\n    id: \"LeftOutline-\\u8DEF\\u5F84\",\n    fill: \"currentColor\",\n    fillRule: \"nonzero\"\n  }))));\n}\n\nexport default LeftOutline;"],"names":["LoginWrapper","styled","div","_templateObject","_taggedTemplateLiteral","_ref","navigate","dispatch","useDispatch","isLogin","setIsLogin","useState","toggleForm","prev","_jsx","children","_jsxs","className","LeftOutline","onClick","InformationCircleOutline","Image","src","Img","width","height","Form","footer","Button","block","type","color","size","onFinish","async","name","password","_ref2","endpoint","res","http","post","concat","BASEURL","data","code","Toast","show","message","setToken","token","fetchuserdata","Item","rules","required","Input","placeholder","autoComplete","pattern","style","textDecoration","props","React","Object","assign","viewBox","xmlns","xmlnsXlink","verticalAlign","filter","Boolean","join","id","stroke","strokeWidth","fill","fillRule","transform","opacity","x","y","d"],"sourceRoot":""}