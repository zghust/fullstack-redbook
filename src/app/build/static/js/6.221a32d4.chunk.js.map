{"version":3,"file":"static/js/6.221a32d4.chunk.js","mappings":"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","sources":["pages/home/style.js","pages/home/tabs-content/style.js","pages/home/tabs-content/index.jsx","pages/home/tabs-content03/style.js","pages/home/tabs-content03/item/style.js","pages/home/tabs-content03/item/index.jsx","pages/home/tabs-content03/index.jsx","pages/home/index.jsx"],"sourcesContent":["import styled from 'styled-components'\r\nexport const HomeWrapper = styled.div`\r\n  .home {\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    .loginbar {\r\n      box-sizing: border-box;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: 20px;\r\n      position: fixed;\r\n      bottom: 50px;\r\n      left: 8px;\r\n      width: 95%;\r\n      height: 30px;\r\n      border-radius: 6px;\r\n      background-color: black;\r\n      opacity: 0.9;\r\n      color: white;\r\n      .loginbtn {\r\n        width: 60px;\r\n        height: 15px;\r\n        line-height: 15px;\r\n        text-align: center;\r\n        background-color: red;\r\n        padding: 4px;\r\n        border-radius: 12px;\r\n      }\r\n    }\r\n  }\r\n`\r\n","import styled from 'styled-components'\r\nexport const TabsWrapper = styled.div`\r\n  .tabscontent {\r\n    width: 100%;\r\n    height: 89vh;\r\n    overflow: auto;\r\n\r\n    .content {\r\n      width: 100%;\r\n      display: flex;\r\n      justify-content: space-around;\r\n    }\r\n  }\r\n\r\n  .tabscontent::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n`\r\n","import { memo, useEffect, useState } from 'react'\r\nimport { TabsWrapper } from './style'\r\nimport { PullToRefresh, InfiniteScroll } from 'antd-mobile'\r\nimport { Drawer } from 'antd'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { fetchdata, cleardata } from '../../../redux/modules/home'\r\nimport Detail from '../detail/detail'\r\nimport Item from './item'\r\n\r\nfunction TabsContent() {\r\n  const res = useSelector((state) => state.home.detaildata)\r\n  const [columns, setColumns] = useState([[], []])\r\n  const total = useSelector((state) => state.home.total)\r\n  const dispatch = useDispatch()\r\n  const [hasMore, setHasMore] = useState(true)\r\n  const [currentpage, setcurrentpage] = useState(1)\r\n  // 在组件中初始化 isLoading 状态\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const newColumns = res.reduce((result, item, index) => {\r\n      const columnIndex = index % 2\r\n      if (!result[columnIndex]) {\r\n        result[columnIndex] = []\r\n      }\r\n      result[columnIndex].push(item)\r\n      return result\r\n    }, [])\r\n    setColumns(newColumns)\r\n  }, [res])\r\n\r\n  useEffect(() => {\r\n    setcurrentpage(1)\r\n    dispatch(cleardata())\r\n    setHasMore(true)\r\n  }, [dispatch])\r\n  const loadMore = async () => {\r\n    // 检查是否正在加载数据\r\n    if (isLoading) {\r\n      return // 如果正在加载，则退出函数\r\n    }\r\n\r\n    try {\r\n      // 设置加载状态为 true\r\n      setIsLoading(true)\r\n\r\n      // 调用异步函数 fetchdata，并等待其完成\r\n      await dispatch(fetchdata(currentpage)).then(() => {\r\n        setcurrentpage(currentpage + 1)\r\n        if (total >= 0 && 2 * currentpage >= total) {\r\n          setHasMore(false)\r\n        }\r\n      })\r\n    } finally {\r\n      // 无论是否成功加载数据，都将加载状态重置为 false\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n  const onRefresh = () => {\r\n    setcurrentpage(1)\r\n    dispatch(cleardata())\r\n    setHasMore(true)\r\n  }\r\n\r\n  //抽屉组件相关\r\n  const [open, setOpen] = useState(false)\r\n  const showDrawer = () => {\r\n    setOpen(true)\r\n  }\r\n  const onClose = () => {\r\n    setOpen(false)\r\n  }\r\n  //detail页面的id\r\n  const [detailId, setDetailId] = useState()\r\n  return (\r\n    <TabsWrapper>\r\n      <PullToRefresh onRefresh={onRefresh}>\r\n        <div className=\"tabscontent\">\r\n          <div className=\"content\">\r\n            <div className=\"left\">\r\n              {columns[0]?.map((item) => {\r\n                return (\r\n                  <div key={item.id}>\r\n                    <Item\r\n                      id={item.id}\r\n                      src={item.cover}\r\n                      title={item.title}\r\n                      favor={item.favorCount}\r\n                      username={item.user.name}\r\n                      surname={item.user.surname}\r\n                      useravatar={item.user.avatar}\r\n                      favorUsers={item.favorUserIds}\r\n                      detailId={detailId}\r\n                      setDetailId={setDetailId}\r\n                      showDrawer={showDrawer}\r\n                    />\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n            <div className=\"right\">\r\n              {columns[1]?.map((item) => {\r\n                return (\r\n                  <div key={item.id}>\r\n                    <Item\r\n                      id={item.id}\r\n                      src={item.cover}\r\n                      title={item.title}\r\n                      favor={item.favorCount}\r\n                      username={item.user.name}\r\n                      surname={item.user.surname}\r\n                      useravatar={item.user.avatar}\r\n                      favorUsers={item.favorUserIds}\r\n                      detailId={detailId}\r\n                      setDetailId={setDetailId}\r\n                      showDrawer={showDrawer}\r\n                    />\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          </div>\r\n          <Drawer\r\n            placement=\"right\"\r\n            onClose={onClose}\r\n            closeIcon={false}\r\n            width=\"100%\"\r\n            open={open}\r\n            styles={{ body: { padding: '0px' } }}\r\n          >\r\n            <Detail id={detailId} onClose={onClose} show={true} />\r\n          </Drawer>\r\n          <InfiniteScroll\r\n            loadMore={loadMore}\r\n            hasMore={hasMore}\r\n            threshold={100}\r\n          />\r\n        </div>\r\n      </PullToRefresh>\r\n    </TabsWrapper>\r\n  )\r\n}\r\n\r\nexport default memo(TabsContent)\r\n","import styled from 'styled-components'\r\nexport const Tab03Wrapper = styled.div`\r\n  .tab03 {\r\n    width: 100%;\r\n    height: 89vh;\r\n    overflow: auto;\r\n  }\r\n  .content {\r\n    width: 100%;\r\n \r\n  }\r\n}\r\n  .tab03::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n`\r\n","import styled from 'styled-components'\r\nconst ItemSwapper = styled.div`\r\n  .item {\r\n    margin-bottom: 3vw;\r\n    width: 100%;\r\n    .top {\r\n      display: flex;\r\n      align-items: center;\r\n      margin: 15px 0 5px 10px;\r\n    }\r\n    .title {\r\n      font-size: 18px;\r\n      margin: 1vw;\r\n    }\r\n    .end {\r\n      display: flex;\r\n      margin-right: 20px;\r\n      margin-top: 10px;\r\n      justify-content: flex-end;\r\n      align-items: center;\r\n      .end-left {\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n      .endfont {\r\n        font-size: 18px;\r\n      }\r\n    }\r\n  }\r\n`\r\nexport default ItemSwapper\r\n","import { Space, Image, Ellipsis, Avatar, Toast } from 'antd-mobile'\r\nimport {\r\n  HeartOutline,\r\n  HeartFill,\r\n  StarOutline,\r\n  StarFill,\r\n  MessageOutline,\r\n} from 'antd-mobile-icons'\r\nimport { memo, useEffect, useState } from 'react'\r\nimport getUserFromToken from '../../../../components/takeuserfromtoken'\r\nimport ItemSwapper from './style'\r\nimport isTokenExpired from '../../../../components/istokenexpire'\r\nimport { useDispatch } from 'react-redux'\r\nimport { favorMoment, userCollect } from '../../../../redux/modules/home'\r\nimport formatdayjs from '../../../../utils/date'\r\nimport { Drawer } from 'antd'\r\nimport Detail from '../../detail/detail'\r\n\r\nfunction Item({\r\n  src,\r\n  title,\r\n  favor = 0,\r\n  username,\r\n  surname,\r\n  useravatar,\r\n  favorUsers,\r\n  id,\r\n  content,\r\n  updateAt,\r\n  collectCount,\r\n  collectUsers,\r\n  commentCount,\r\n}) {\r\n  const notLogin = isTokenExpired()\r\n  const dispatch = useDispatch()\r\n  const userid = getUserFromToken()\r\n  //处理点赞\r\n  const [ownfavor, setOwnfavor] = useState(favor)\r\n  const [isadd, setIsadd] = useState(\r\n    favorUsers.find((user) => user === userid) === undefined\r\n  )\r\n  const handleFavor = () => {\r\n    if (!!userid && !notLogin) {\r\n      dispatch(favorMoment(id))\r\n      if (isadd) {\r\n        setOwnfavor(ownfavor + 1)\r\n        setIsadd(!isadd)\r\n      } else {\r\n        setOwnfavor(ownfavor - 1)\r\n        setIsadd(!isadd)\r\n      }\r\n    } else {\r\n      Toast.show({\r\n        content: '先登陆，后点赞~',\r\n      })\r\n    }\r\n  }\r\n  //处理收藏\r\n  const [iscollect, setIscollect] = useState(false)\r\n  const [ownCollect, setOwnCollect] = useState(collectCount)\r\n\r\n  useEffect(() => {\r\n    if (!collectUsers.every((e) => e === null)) {\r\n      setOwnCollect(collectUsers.length)\r\n    } else {\r\n      setOwnCollect(0)\r\n    }\r\n  }, [collectUsers])\r\n  useEffect(() => {\r\n    setIscollect(collectUsers.includes(userid))\r\n  }, [collectUsers, userid])\r\n  const handleCollect = () => {\r\n    if (!!userid && !notLogin) {\r\n      dispatch(userCollect({ id: userid, momentId: id }))\r\n      if (!iscollect) {\r\n        setOwnCollect(ownCollect + 1)\r\n        setIscollect(!iscollect)\r\n      } else {\r\n        setOwnCollect(ownCollect - 1)\r\n        setIscollect(!iscollect)\r\n      }\r\n    } else {\r\n      Toast.show({\r\n        content: '先登陆，后收藏~',\r\n      })\r\n    }\r\n  }\r\n  //抽屉组件相关\r\n  const [open, setOpen] = useState(false)\r\n  const showDrawer = () => {\r\n    setOpen(true)\r\n  }\r\n  const onClose = () => {\r\n    setOpen(false)\r\n  }\r\n\r\n  return (\r\n    <ItemSwapper>\r\n      <div className=\"item\">\r\n        <div>\r\n          <div className=\"top\">\r\n            <Space>\r\n              <Avatar\r\n                src={useravatar}\r\n                className=\"centerright\"\r\n                fit=\"cover\"\r\n                style={{ '--size': '30px', '--border-radius': '50%' }}\r\n              />\r\n              <div\r\n                style={{\r\n                  lineHeight: '30px',\r\n                  fontSize: '18px',\r\n                  color: 'grey',\r\n                }}\r\n              >\r\n                {surname || username}\r\n              </div>\r\n              <div\r\n                style={{ lineHeight: '30px', fontSize: '16px', color: 'grey' }}\r\n              >\r\n                {formatdayjs(updateAt)}\r\n              </div>\r\n            </Space>\r\n          </div>\r\n          <Image src={src} fit=\"cover\" width={'100%'} />\r\n        </div>\r\n        <div className=\"end\">\r\n          <div>\r\n            <Space align=\"center\">\r\n              <span onClick={handleFavor}>\r\n                {notLogin ? (\r\n                  <HeartOutline fontSize={22} color=\"grey\" />\r\n                ) : isadd ? (\r\n                  <HeartOutline fontSize={22} color=\"grey\" />\r\n                ) : (\r\n                  <HeartFill fontSize={22} color=\"red\" />\r\n                )}\r\n              </span>\r\n              <span className=\"endfont\">{ownfavor}</span>\r\n            </Space>\r\n          </div>\r\n          <div>\r\n            <Space align=\"center\">\r\n              <div onClick={handleCollect}>\r\n                {!iscollect ? (\r\n                  <StarOutline\r\n                    style={{ paddingLeft: '10px' }}\r\n                    fontSize={22}\r\n                    color=\"grey\"\r\n                  />\r\n                ) : (\r\n                  <StarFill\r\n                    style={{ paddingLeft: '10px', color: ' #FFCC00' }}\r\n                    fontSize={22}\r\n                  />\r\n                )}\r\n              </div>\r\n              <span className=\"endfont\">{ownCollect}</span>\r\n            </Space>\r\n          </div>\r\n\r\n          <div>\r\n            <Space align=\"center\">\r\n              <MessageOutline style={{ paddingLeft: '10px' }} fontSize={22} />\r\n              <span className=\"endfont\">{commentCount}</span>\r\n            </Space>\r\n          </div>\r\n        </div>\r\n        <div\r\n          style={{\r\n            marginLeft: '20px',\r\n            marginRight: '20px',\r\n            width: '90%',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'flex-start',\r\n          }}\r\n        >\r\n          <Ellipsis\r\n            direction=\"end\"\r\n            onContentClick={showDrawer}\r\n            rows={1}\r\n            content={`${title} ${content}`}\r\n            className=\"title\"\r\n          />\r\n          <span\r\n            style={{ fontSize: '18px', color: 'black', fontWeight: '600' }}\r\n            onClick={showDrawer}\r\n          >\r\n            查看全文\r\n          </span>\r\n        </div>\r\n        <Drawer\r\n          placement=\"bottom\"\r\n          title=\"正文和评论\"\r\n          onClose={onClose}\r\n          // closeIcon={false}\r\n          height=\"80%\"\r\n          open={open}\r\n          styles={{ body: { padding: '0px' } }}\r\n        >\r\n          <Detail show={false} id={id} />\r\n        </Drawer>\r\n      </div>\r\n    </ItemSwapper>\r\n  )\r\n}\r\nexport default memo(Item)\r\n","import { memo, useEffect, useState } from 'react'\r\nimport { Tab03Wrapper } from './style'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Item from './item'\r\nimport { fetchdata03 } from '../../../redux/modules/home'\r\nimport isTokenExpired from '../../../components/istokenexpire'\r\nimport getUserFromToken from '../../../components/takeuserfromtoken'\r\n\r\nfunction TabsContent03() {\r\n  const res = useSelector((state) => state.home.followMoments)\r\n\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    if (!isTokenExpired() && !!getUserFromToken()) {\r\n      dispatch(fetchdata03())\r\n    }\r\n  }, [])\r\n  return (\r\n    <Tab03Wrapper>\r\n      <div className=\"tab03\">\r\n        <div className=\"content\">\r\n          {res?.map((item) => {\r\n            return (\r\n              <div key={item.id}>\r\n                <Item\r\n                  id={item.id}\r\n                  src={item.cover}\r\n                  title={item.title}\r\n                  favor={item.favorCount}\r\n                  username={item.user.name}\r\n                  surname={item.user.surname}\r\n                  useravatar={item.user.avatar}\r\n                  favorUsers={item.favorUserIds}\r\n                  content={item.content}\r\n                  updateAt={item.updateAt}\r\n                  collectCount={item.collectCount}\r\n                  collectUsers={item.collectUsers}\r\n                  commentCount={item.commentCount}\r\n                />\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n\r\n        {isTokenExpired() || !getUserFromToken() ? (\r\n          <div style={{ marginTop: '30px', marginLeft: '30px', color: 'gray' }}>\r\n            登陆后才能看到你关注的对象最新文章~\r\n          </div>\r\n        ) : (\r\n          res.length === 0 && (\r\n            <div\r\n              style={{ marginTop: '30px', marginLeft: '30px', color: 'gray' }}\r\n            >\r\n              这里是一片荒草地，看到感兴趣的人就关注吧~\r\n            </div>\r\n          )\r\n        )}\r\n      </div>\r\n    </Tab03Wrapper>\r\n  )\r\n}\r\nexport default memo(TabsContent03)\r\n","import Tabss from './tabs/index'\r\nimport { HomeWrapper } from './style'\r\nimport { memo } from 'react'\r\nimport TabsContent from './tabs-content'\r\nimport TabsContent02 from './tabs-content02'\r\nimport TabsContent03 from './tabs-content03'\r\nimport getUserFromToken from '../../components/takeuserfromtoken'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport isTokenExpired from '../../components/istokenexpire'\r\n\r\nconst tabItems = [\r\n  { key: '0', title: '关注' },\r\n  { key: '1', title: '发现' },\r\n  { key: '2', title: '收藏' },\r\n]\r\n\r\nfunction Home() {\r\n  const navigate = useNavigate()\r\n\r\n  return (\r\n    <HomeWrapper>\r\n      <div className=\"home\">\r\n        <div className=\"maincontent\">\r\n          <Tabss\r\n            tabitems={tabItems}\r\n            tabscontent={TabsContent}\r\n            tabscontent02={TabsContent02}\r\n            tabscontent03={TabsContent03}\r\n          />\r\n        </div>\r\n        {!getUserFromToken() || isTokenExpired() ? (\r\n          <div className=\"loginbar\">\r\n            <div>登陆解锁更多功能</div>\r\n            <div className=\"loginbtn\" onClick={() => navigate('/login')}>\r\n              立即登陆\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </HomeWrapper>\r\n  )\r\n}\r\n\r\nexport default memo(Home)\r\n"],"names":["HomeWrapper","styled","div","_templateObject","_taggedTemplateLiteral","TabsWrapper","TabsContent","_columns$","_columns$2","res","useSelector","state","home","detaildata","columns","setColumns","useState","total","dispatch","useDispatch","hasMore","setHasMore","currentpage","setcurrentpage","isLoading","setIsLoading","useEffect","newColumns","reduce","result","item","index","columnIndex","push","cleardata","open","setOpen","showDrawer","onClose","detailId","setDetailId","_jsx","children","PullToRefresh","onRefresh","_jsxs","className","map","Item","id","src","cover","title","favor","favorCount","username","user","name","surname","useravatar","avatar","favorUsers","favorUserIds","Drawer","placement","closeIcon","width","styles","body","padding","Detail","show","InfiniteScroll","loadMore","async","fetchdata","then","threshold","memo","Tab03Wrapper","_ref","content","updateAt","collectCount","collectUsers","commentCount","notLogin","isTokenExpired","userid","getUserFromToken","ownfavor","setOwnfavor","isadd","setIsadd","undefined","find","iscollect","setIscollect","ownCollect","setOwnCollect","every","e","length","includes","ItemSwapper","Space","Avatar","fit","style","lineHeight","fontSize","color","formatdayjs","Image","align","onClick","handleFavor","favorMoment","Toast","HeartOutline","HeartFill","handleCollect","userCollect","momentId","StarFill","paddingLeft","StarOutline","MessageOutline","marginLeft","marginRight","display","alignItems","justifyContent","Ellipsis","direction","onContentClick","rows","concat","fontWeight","height","TabsContent03","followMoments","fetchdata03","marginTop","tabItems","key","Home","navigate","useNavigate","Tabss","tabitems","tabscontent","tabscontent02","TabsContent02","tabscontent03"],"sourceRoot":""}