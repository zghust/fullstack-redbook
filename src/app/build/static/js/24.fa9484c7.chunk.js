"use strict";(self.webpackChunkredbook01=self.webpackChunkredbook01||[]).push([[24],{8024:(e,n,t)=>{t.r(n),t.d(n,{default:()=>z});var s,i=t(2791),r=t(9434),a=t(960),l=t(6696),d=t(5982),o=t(168),c=t(4210);const h=c.ZP.div(s||(s=(0,o.Z)(["\n  .mine {\n    box-sizing: border-box;\n    height: 100vh;\n    padding: 20px;\n    background-color: rgb(66, 117, 164);\n    .top {\n      .notlogin {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 100vh;\n      }\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n      .login {\n        width: 80px;\n        height: 24px;\n        background-color: red;\n        color: white;\n        line-height: 24px;\n        text-align: center;\n        border-radius: 10px;\n      }\n      .topright {\n        width: 100px;\n        height: 24px;\n        line-height: 24px;\n        text-align: center;\n        border: 1px solid red;\n        border-radius: 12px;\n      }\n    }\n    .center {\n      margin: 10px 0;\n      .centerMain {\n        margin: 18px 0;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        .centerLeft {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          width: 150px;\n        }\n        .centerRight {\n          width: 100px;\n          height: 24px;\n          line-height: 24px;\n          text-align: center;\n          border: 1px solid grey;\n          border-radius: 12px;\n        }\n      }\n    }\n    .end {\n      padding-top: 10px;\n      .card {\n        margin: -20px;\n        height: 100vh;\n        overflow: auto;\n      }\n    }\n  }\n"])));var v,u=t(3267),x=t(4770);const p=c.ZP.div(v||(v=(0,o.Z)(["\n  .tab02 {\n    width: 100%;\n    height: 59vh;\n    overflow: auto;\n  }\n  .content {\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n  }\n}\n  .tab02::-webkit-scrollbar {\n    width: 0;\n  }\n"])));var m=t(7828),j=t(9036),g=t(4704),f=t(1029),w=t(3747),y=t(184);function b(){var e,n;const t=(0,r.v9)((e=>e.home.ListFavorNotes)),[s,a]=(0,i.useState)([[],[]]);(0,i.useEffect)((()=>{const e=null===t||void 0===t?void 0:t.reduce(((e,n,t)=>{const s=t%2;return e[s]||(e[s]=[]),e[s].push(n),e}),[]);a(e)}),[t]);const l=(0,r.I0)();(0,i.useEffect)((()=>{!(0,d.Z)()&&(0,w.Z)()&&l((0,f.B_)())}),[]);const[o,c]=(0,i.useState)(!1),h=()=>{c(!0)},v=()=>{c(!1)},[u,x]=(0,i.useState)();return(0,y.jsx)(p,{children:(0,y.jsxs)("div",{className:"tab02",children:[0===(null===t||void 0===t?void 0:t.length)&&(0,y.jsx)("div",{style:{marginTop:"30px",marginLeft:"30px",color:"gray"},children:"\u8fd9\u91cc\u662f\u4e00\u7247\u8352\u8349\u5730\uff0c\u5feb\u53bb\u9996\u9875\u7ed9\u559c\u6b22\u7684\u6587\u7ae0\u70b9\u4e2a\u8d5e\u5427~"}),(0,y.jsxs)("div",{className:"content",children:[(0,y.jsx)("div",{className:"left",children:null===(e=s[0])||void 0===e?void 0:e.map((e=>(0,y.jsx)("div",{children:(0,y.jsx)(g.Z,{id:e.id,src:e.cover,title:e.title,favor:e.favorCount,username:e.user.name,surname:e.user.surname,useravatar:e.user.avatar,favorUsers:e.favorUserIds,detailId:u,setDetailId:x,showDrawer:h})},e.id)))}),(0,y.jsx)("div",{className:"right",children:null===(n=s[1])||void 0===n?void 0:n.map((e=>(0,y.jsx)("div",{children:(0,y.jsx)(g.Z,{id:e.id,src:e.cover,title:e.title,favor:e.favorCount,username:e.user.name,surname:e.user.surname,useravatar:e.user.avatar,favorUsers:e.favorUserIds,detailId:u,setDetailId:x,showDrawer:h})},e.id)))})]}),(0,y.jsx)(m.Z,{placement:"right",onClose:v,closeIcon:!1,width:"100%",open:o,styles:{body:{padding:"0px"}},children:(0,y.jsx)(j.default,{id:u,onClose:v,show:!0})})]})})}const Z=(0,i.memo)(b);var I,C=t(8387),N=t(5057),k=t(3834),S=t(1274),U=t(1773),D=t(1777),E=t(1065),L=t(9150),F=t(2679);const R=c.ZP.div(I||(I=(0,o.Z)(["\n  .tab02 {\n    width: 100%;\n    height: 59vh;\n    overflow: auto;\n  }\n  .content {\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n  }\n}\n  .tab02::-webkit-scrollbar {\n    width: 0;\n  }\n"])));function T(){var e,n;const t=(0,r.v9)((e=>e.home.listNotes)),[s,a]=(0,i.useState)([[],[]]);(0,i.useEffect)((()=>{const e=null===t||void 0===t?void 0:t.reduce(((e,n,t)=>{const s=t%2;return e[s]||(e[s]=[]),e[s].push(n),e}),[]);a(e)}),[t]);const l=(0,r.I0)();(0,i.useEffect)((()=>{!(0,d.Z)()&&(0,w.Z)()&&l((0,f.YB)())}),[]);const[o,c]=(0,i.useState)(!1),h=()=>{c(!0)},v=()=>{c(!1)},[u,x]=(0,i.useState)();return(0,y.jsx)(R,{children:(0,y.jsxs)("div",{className:"tab02",children:[0===(null===t||void 0===t?void 0:t.length)&&(0,y.jsx)("div",{style:{marginTop:"30px",marginLeft:"30px",color:"gray"},children:"\u8fd9\u91cc\u662f\u4e00\u7247\u8352\u8349\u5730\uff0c\u8bf7\u5f00\u59cb\u53d1\u5e03\u4f60\u7684\u7b2c\u4e00\u7bc7\u7b14\u8bb0\u5427~"}),(0,y.jsxs)("div",{className:"content",children:[(0,y.jsx)("div",{className:"left",children:null===(e=s[0])||void 0===e?void 0:e.map((e=>(0,y.jsx)("div",{children:(0,y.jsx)(g.Z,{id:e.id,src:e.cover,title:e.title,favor:e.favorCount,username:e.user.name,surname:e.user.surname,useravatar:e.user.avatar,favorUsers:e.favorUserIds,detailId:u,setDetailId:x,showDrawer:h})},e.id)))}),(0,y.jsx)("div",{className:"right",children:null===(n=s[1])||void 0===n?void 0:n.map((e=>(0,y.jsx)("div",{children:(0,y.jsx)(g.Z,{id:e.id,src:e.cover,title:e.title,favor:e.favorCount,username:e.user.name,surname:e.user.surname,useravatar:e.user.avatar,favorUsers:e.favorUserIds,detailId:u,setDetailId:x,showDrawer:h})},e.id)))})]}),(0,y.jsx)(m.Z,{placement:"right",onClose:v,closeIcon:!1,width:"100%",open:o,styles:{body:{padding:"0px"}},children:(0,y.jsx)(j.default,{id:u,onClose:v,show:!0})}),((0,d.Z)()||!(0,w.Z)())&&(0,y.jsx)("div",{style:{margin:"20px"},children:"\u767b\u9646\u540e\u624d\u80fd\u770b\u5230\u4f60\u53d1\u5e03\u7684\u7b14\u8bb0~"})]})})}const A=(0,i.memo)(T);var B=t(2434);const{Option:P}=C.default,_=[{key:"0",title:"\u8d5e\u8fc7"},{key:"1",title:"\u7b14\u8bb0"},{key:"2",title:"\u6536\u85cf"}];function O(e){let{navigate:n}=e;const t=(0,r.v9)((e=>e.user.userdata.data))||[],s=t[0],o=t[1],c=(0,r.I0)();(0,i.useEffect)((()=>{(0,d.Z)()||c((0,l.u4)())}),[c]);const[v,p]=(0,i.useState)(!1),[j,g]=(0,i.useState)(!1),f=()=>{g(!1)},[b,I]=(0,i.useState)([]),[R,T]=(0,i.useState)();(0,i.useEffect)((()=>{T(null===s||void 0===s?void 0:s.ava_url)}),[null===s||void 0===s?void 0:s.ava_url]);const O={onRemove:e=>{const n=b.indexOf(e),t=b.slice();t.splice(n,1),I(t)},beforeUpload:e=>(((e,n)=>{const t=new FileReader;t.addEventListener("load",(()=>n(t.result))),t.readAsDataURL(e)})(e,(e=>{T(e)})),I([...b,e]),!1),fileList:b};return(0,y.jsx)(h,{children:(0,y.jsxs)("div",{className:"mine",children:[(0,y.jsx)("div",{className:"top",children:(0,d.Z)()?(0,y.jsxs)("div",{className:"notlogin",children:[(0,y.jsx)("h2",{children:"\u6b22\u8fce\u6765\u5230\u5c0f\u7ea2\u4e66"}),(0,y.jsx)("div",{onClick:()=>n("/login"),className:"login",children:"\u7acb\u5373\u767b\u9646"})]}):(0,y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:390},children:[(0,y.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,y.jsx)(u.qE,{src:null===s||void 0===s?void 0:s.ava_url,style:{width:"64px",height:"64px",borderRadius:"32px",marginRight:"10px"}}),(0,y.jsx)("span",{children:(null===s||void 0===s?void 0:s.surname)||(null===s||void 0===s?void 0:s.name)})]}),(0,y.jsx)("div",{className:"topright",onClick:()=>{(0,B.removeToken)(),p((e=>!e))},children:"\u9000\u51fa\u767b\u9646"})]})}),(0,d.Z)()?null:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"center",children:[(0,y.jsx)("div",{children:(null===s||void 0===s?void 0:s.intro)||"\u8bf7\u7f16\u8f91\u8d44\u6599\u505a\u4e2a\u81ea\u6211\u4ecb\u7ecd\u5427~"}),(0,y.jsx)("div",{style:{marginTop:"30px"},children:"1"===(null===s||void 0===s?void 0:s.gender)?"\u7537":"0"===(null===s||void 0===s?void 0:s.gender)?"\u5973":"\u4fdd\u5bc6"}),(0,y.jsxs)("div",{className:"centerMain",children:[(0,y.jsxs)("div",{className:"centerLeft",children:[(0,y.jsxs)("div",{style:{textAlign:"center",width:"50px"},children:[(0,y.jsx)("div",{style:{marginBottom:"5px"},children:null===o||void 0===o?void 0:o.beFollowCounts}),(0,y.jsx)("div",{children:"\u83b7\u5173\u6ce8"})]}),(0,y.jsxs)("div",{style:{textAlign:"center",width:"100px"},children:[(0,y.jsx)("div",{style:{marginBottom:"5px"},children:null===o||void 0===o?void 0:o.beFavorAndCollectCounts}),(0,y.jsx)("div",{children:"\u83b7\u8d5e\u4e0e\u6536\u85cf"})]})]}),(0,y.jsx)("div",{className:"centerRight",onClick:()=>{g(!0)},children:"\u7f16\u8f91\u8d44\u6599"})]})]}),(0,y.jsx)("div",{className:"end",children:(0,y.jsx)(u.Zb,{className:"card",style:{padding:"0"},children:(0,y.jsx)(F.Z,{tabitems:_,tabscontent:A,tabscontent02:x.Z,tabscontent03:Z})})})]}),(0,y.jsx)(m.Z,{title:"\u7f16\u8f91\u8d44\u6599",placement:"bottom",onClose:f,height:"610px",open:j,styles:{body:{paddingBottom:80}},children:(0,y.jsxs)(N.Z,{style:{overflowX:"hidden"},onFinish:async e=>{let{surname:n,gender:t,avatar:s,intro:i}=e;const r=new FormData;r.append("surname",n),r.append("gender",t),r.append("intro",i),b.forEach((e=>{r.append("avatar",e)}));await L.Z.patch("/user/my/".concat((0,w.Z)()),r);f(),window.location.reload()},labelCol:{span:8},wrapperCol:{span:16},initialValues:{name:null===s||void 0===s?void 0:s.name,surname:null===s||void 0===s?void 0:s.surname,gender:null===s||void 0===s?void 0:s.gender,intro:null===s||void 0===s?void 0:s.intro},children:[(0,y.jsx)(N.Z.Item,{label:"\u7528\u6237\u540d",name:"name",children:(0,y.jsx)(k.Z,{readOnly:!0})}),(0,y.jsx)(N.Z.Item,{name:"surname",label:"\u6635\u79f0",children:(0,y.jsx)(k.Z,{placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u6635\u79f0~"})}),(0,y.jsx)(N.Z.Item,{name:"avatar",label:"\u5934\u50cf",children:(0,y.jsx)("div",{children:(0,y.jsx)(a.Z,{rotationSlider:!0,modalWidth:350,modalHeight:350,children:(0,y.jsx)(S.Z,{listType:"picture-card",showUploadList:!1,...O,children:R?(0,y.jsx)("img",{className:"head",src:R,style:{width:100,height:100},alt:"cover"}):(0,y.jsx)("div",{children:(0,y.jsx)(E.Z,{fontSize:24,color:"grey"})})})})})}),(0,y.jsx)(N.Z.Item,{name:"gender",label:"\u6027\u522b",children:(0,y.jsxs)(C.default,{placeholder:"\u9009\u62e9\u6027\u522b",children:[(0,y.jsx)(P,{value:"1",children:"\u7537"}),(0,y.jsx)(P,{value:"0",children:"\u5973"})]})}),(0,y.jsx)(N.Z.Item,{name:"intro",label:"\u4e2a\u4eba\u7b80\u4ecb",children:(0,y.jsx)(k.Z.TextArea,{rows:4,placeholder:"\u8bf4\u70b9\u4ec0\u4e48\u5427~"})}),(0,y.jsx)(N.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,y.jsxs)(U.Z,{children:[(0,y.jsx)(D.ZP,{onClick:f,children:"\u53d6\u6d88"}),(0,y.jsx)(D.ZP,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})]})})]})})]})})}const z=(0,i.memo)(O)}}]);
//# sourceMappingURL=24.fa9484c7.chunk.js.map