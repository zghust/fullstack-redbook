"use strict";(self.webpackChunkredbook01=self.webpackChunkredbook01||[]).push([[6],{7006:(e,n,t)=>{t.r(n),t.d(n,{default:()=>R});var s,i=t(2679),o=t(168),r=t(4210);const a=r.ZP.div(s||(s=(0,o.Z)(["\n  .home {\n    width: 100%;\n    height: 100%;\n\n    .loginbar {\n      box-sizing: border-box;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 20px;\n      position: fixed;\n      bottom: 50px;\n      left: 8px;\n      width: 95%;\n      height: 30px;\n      border-radius: 6px;\n      background-color: black;\n      opacity: 0.9;\n      color: white;\n      .loginbtn {\n        width: 60px;\n        height: 15px;\n        line-height: 15px;\n        text-align: center;\n        background-color: red;\n        padding: 4px;\n        border-radius: 12px;\n      }\n    }\n  }\n"])));var l,c=t(2791);const d=r.ZP.div(l||(l=(0,o.Z)(["\n  .tabscontent {\n    width: 100%;\n    height: 89vh;\n    overflow: auto;\n\n    .content {\n      width: 100%;\n      display: flex;\n      justify-content: space-around;\n    }\n  }\n\n  .tabscontent::-webkit-scrollbar {\n    display: none;\n  }\n"])));var x=t(3267),h=t(7828),u=t(9434),m=t(1029),v=t(9036),f=t(4704),p=t(184);function j(){var e,n;const t=(0,u.v9)((e=>e.home.detaildata)),[s,i]=(0,c.useState)([[],[]]),o=(0,u.v9)((e=>e.home.total)),r=(0,u.I0)(),[a,l]=(0,c.useState)(!0),[j,g]=(0,c.useState)(1),[y,b]=(0,c.useState)(!1);(0,c.useEffect)((()=>{const e=t.reduce(((e,n,t)=>{const s=t%2;return e[s]||(e[s]=[]),e[s].push(n),e}),[]);i(e)}),[t]),(0,c.useEffect)((()=>{g(1),r((0,m.gP)()),l(!0)}),[r]);const[w,Z]=(0,c.useState)(!1),C=()=>{Z(!0)},k=()=>{Z(!1)},[N,S]=(0,c.useState)();return(0,p.jsx)(d,{children:(0,p.jsx)(x.t8,{onRefresh:()=>{g(1),r((0,m.gP)()),l(!0)},children:(0,p.jsxs)("div",{className:"tabscontent",children:[(0,p.jsxs)("div",{className:"content",children:[(0,p.jsx)("div",{className:"left",children:null===(e=s[0])||void 0===e?void 0:e.map((e=>(0,p.jsx)("div",{children:(0,p.jsx)(f.Z,{id:e.id,src:e.cover,title:e.title,favor:e.favorCount,username:e.user.name,surname:e.user.surname,useravatar:e.user.avatar,favorUsers:e.favorUserIds,detailId:N,setDetailId:S,showDrawer:C})},e.id)))}),(0,p.jsx)("div",{className:"right",children:null===(n=s[1])||void 0===n?void 0:n.map((e=>(0,p.jsx)("div",{children:(0,p.jsx)(f.Z,{id:e.id,src:e.cover,title:e.title,favor:e.favorCount,username:e.user.name,surname:e.user.surname,useravatar:e.user.avatar,favorUsers:e.favorUserIds,detailId:N,setDetailId:S,showDrawer:C})},e.id)))})]}),(0,p.jsx)(h.Z,{placement:"right",onClose:k,closeIcon:!1,width:"100%",open:w,styles:{body:{padding:"0px"}},children:(0,p.jsx)(v.default,{id:N,onClose:k,show:!0})}),(0,p.jsx)(x.v_,{loadMore:async()=>{if(!y)try{b(!0),await r((0,m.VK)(j)).then((()=>{g(j+1),o>=0&&2*j>=o&&l(!1)}))}finally{b(!1)}},hasMore:a,threshold:100})]})})})}const g=(0,c.memo)(j);var y,b=t(4770);const w=r.ZP.div(y||(y=(0,o.Z)(["\n  .tab03 {\n    width: 100%;\n    height: 89vh;\n    overflow: auto;\n  }\n  .content {\n    width: 100%;\n \n  }\n}\n  .tab03::-webkit-scrollbar {\n    display: none;\n  }\n"])));var Z,C=t(6503),k=t(9598),N=t(5807),S=t(1514),I=t(9098),z=t(3747);const U=r.ZP.div(Z||(Z=(0,o.Z)(["\n  .item {\n    margin-bottom: 3vw;\n    width: 100%;\n    .top {\n      display: flex;\n      align-items: center;\n      margin: 15px 0 5px 10px;\n    }\n    .title {\n      font-size: 18px;\n      margin: 1vw;\n    }\n    .end {\n      display: flex;\n      margin-right: 20px;\n      margin-top: 10px;\n      justify-content: flex-end;\n      align-items: center;\n      .end-left {\n        display: flex;\n        align-items: center;\n      }\n      .endfont {\n        font-size: 18px;\n      }\n    }\n  }\n"])));var E=t(5982),L=t(5287);function P(e){let{src:n,title:t,favor:s=0,username:i,surname:o,useravatar:r,favorUsers:a,id:l,content:d,updateAt:f,collectCount:j,collectUsers:g,commentCount:y}=e;const b=(0,E.Z)(),w=(0,u.I0)(),Z=(0,z.Z)(),[P,T]=(0,c.useState)(s),[D,F]=(0,c.useState)(void 0===a.find((e=>e===Z))),[A,H]=(0,c.useState)(!1),[M,R]=(0,c.useState)(j);(0,c.useEffect)((()=>{g.every((e=>null===e))?R(0):R(g.length)}),[g]),(0,c.useEffect)((()=>{H(g.includes(Z))}),[g,Z]);const[q,K]=(0,c.useState)(!1),Q=()=>{K(!0)};return(0,p.jsx)(U,{children:(0,p.jsxs)("div",{className:"item",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"top",children:(0,p.jsxs)(x.T,{children:[(0,p.jsx)(x.qE,{src:r,className:"centerright",fit:"cover",style:{"--size":"30px","--border-radius":"50%"}}),(0,p.jsx)("div",{style:{lineHeight:"30px",fontSize:"18px",color:"grey"},children:o||i}),(0,p.jsx)("div",{style:{lineHeight:"30px",fontSize:"16px",color:"grey"},children:(0,L.Z)(f)})]})}),(0,p.jsx)(x.Ee,{src:n,fit:"cover",width:"100%"})]}),(0,p.jsxs)("div",{className:"end",children:[(0,p.jsx)("div",{children:(0,p.jsxs)(x.T,{align:"center",children:[(0,p.jsx)("span",{onClick:()=>{Z&&!b?(w((0,m.Qw)(l)),D?(T(P+1),F(!D)):(T(P-1),F(!D))):x.FN.show({content:"\u5148\u767b\u9646\uff0c\u540e\u70b9\u8d5e~"})},children:b||D?(0,p.jsx)(C.Z,{fontSize:22,color:"grey"}):(0,p.jsx)(k.Z,{fontSize:22,color:"red"})}),(0,p.jsx)("span",{className:"endfont",children:P})]})}),(0,p.jsx)("div",{children:(0,p.jsxs)(x.T,{align:"center",children:[(0,p.jsx)("div",{onClick:()=>{Z&&!b?(w((0,m.LC)({id:Z,momentId:l})),A?(R(M-1),H(!A)):(R(M+1),H(!A))):x.FN.show({content:"\u5148\u767b\u9646\uff0c\u540e\u6536\u85cf~"})},children:A?(0,p.jsx)(S.Z,{style:{paddingLeft:"10px",color:" #FFCC00"},fontSize:22}):(0,p.jsx)(N.Z,{style:{paddingLeft:"10px"},fontSize:22,color:"grey"})}),(0,p.jsx)("span",{className:"endfont",children:M})]})}),(0,p.jsx)("div",{children:(0,p.jsxs)(x.T,{align:"center",children:[(0,p.jsx)(I.Z,{style:{paddingLeft:"10px"},fontSize:22}),(0,p.jsx)("span",{className:"endfont",children:y})]})})]}),(0,p.jsxs)("div",{style:{marginLeft:"20px",marginRight:"20px",width:"90%",display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[(0,p.jsx)(x.mH,{direction:"end",onContentClick:Q,rows:1,content:"".concat(t," ").concat(d),className:"title"}),(0,p.jsx)("span",{style:{fontSize:"18px",color:"black",fontWeight:"600"},onClick:Q,children:"\u67e5\u770b\u5168\u6587"})]}),(0,p.jsx)(h.Z,{placement:"bottom",title:"\u6b63\u6587\u548c\u8bc4\u8bba",onClose:()=>{K(!1)},height:"80%",open:q,styles:{body:{padding:"0px"}},children:(0,p.jsx)(v.default,{show:!1,id:l})})]})})}const T=(0,c.memo)(P);function D(){const e=(0,u.v9)((e=>e.home.followMoments)),n=(0,u.I0)();return(0,c.useEffect)((()=>{!(0,E.Z)()&&(0,z.Z)()&&n((0,m.Rf)())}),[]),(0,p.jsx)(w,{children:(0,p.jsxs)("div",{className:"tab03",children:[(0,p.jsx)("div",{className:"content",children:null===e||void 0===e?void 0:e.map((e=>(0,p.jsx)("div",{children:(0,p.jsx)(T,{id:e.id,src:e.cover,title:e.title,favor:e.favorCount,username:e.user.name,surname:e.user.surname,useravatar:e.user.avatar,favorUsers:e.favorUserIds,content:e.content,updateAt:e.updateAt,collectCount:e.collectCount,collectUsers:e.collectUsers,commentCount:e.commentCount})},e.id)))}),(0,E.Z)()||!(0,z.Z)()?(0,p.jsx)("div",{style:{marginTop:"30px",marginLeft:"30px",color:"gray"},children:"\u767b\u9646\u540e\u624d\u80fd\u770b\u5230\u4f60\u5173\u6ce8\u7684\u5bf9\u8c61\u6700\u65b0\u6587\u7ae0~"}):0===e.length&&(0,p.jsx)("div",{style:{marginTop:"30px",marginLeft:"30px",color:"gray"},children:"\u8fd9\u91cc\u662f\u4e00\u7247\u8352\u8349\u5730\uff0c\u770b\u5230\u611f\u5174\u8da3\u7684\u4eba\u5c31\u5173\u6ce8\u5427~"})]})})}const F=(0,c.memo)(D);var A=t(7689);const H=[{key:"0",title:"\u5173\u6ce8"},{key:"1",title:"\u53d1\u73b0"},{key:"2",title:"\u6536\u85cf"}];function M(){const e=(0,A.s0)();return(0,p.jsx)(a,{children:(0,p.jsxs)("div",{className:"home",children:[(0,p.jsx)("div",{className:"maincontent",children:(0,p.jsx)(i.Z,{tabitems:H,tabscontent:g,tabscontent02:b.Z,tabscontent03:F})}),!(0,z.Z)()||(0,E.Z)()?(0,p.jsxs)("div",{className:"loginbar",children:[(0,p.jsx)("div",{children:"\u767b\u9646\u89e3\u9501\u66f4\u591a\u529f\u80fd"}),(0,p.jsx)("div",{className:"loginbtn",onClick:()=>e("/login"),children:"\u7acb\u5373\u767b\u9646"})]}):null]})})}const R=(0,c.memo)(M)}}]);
//# sourceMappingURL=6.221a32d4.chunk.js.map